# 보완 사항 분석

> PROJECT.md × REFERENCE_RURUPING.md × HACKATHON.md 를 교차 분석한 개선 목록

---

## 1. 데모 품질 (심사 50%) — 가장 중요

### 1-1. 배포 필수 (프로덕션 스프린트)

현재 `localhost:3000 / 4000` 로컬 실행만 가능. 해커톤 요구사항은 **실제 작동하는 배포된 앱**.

- [ ] **백엔드 배포**: GCP Cloud Run 또는 Railway 등에 NestJS 배포
- [ ] **프론트엔드 배포**: Vercel에 Next.js 배포
- [ ] **환경변수 세팅**: `FRONTEND_URL`, `NEXT_PUBLIC_BACKEND_URL` 프로덕션 값 설정
- [ ] **WebSocket 배포 확인**: Socket.IO가 프로덕션에서 정상 동작하는지 (CORS, wss://)
- [ ] **HTTPS 필수**: 마이크 권한은 HTTPS에서만 동작 (`getUserMedia` 제한)

### 1-2. 모바일 대응

해커톤 현장에서 심사위원이 바로 플레이하려면 **모바일 브라우저 지원 필수**.

- [ ] 반응형 CSS 확인 (현재 순수 CSS 1,410줄 — 모바일 대응 여부 불명)
- [ ] 모바일 마이크 권한 테스트 (iOS Safari, Android Chrome)
- [ ] 터치 인터랙션 확인 (버튼 크기, 스크롤 등)

### 1-3. 에러 핸들링 / 안정성

라이브 데모 중 깨지면 치명적.

- [ ] Gemini API 호출 실패 시 재시도 또는 fallback
- [ ] 녹음 실패 시 안내 메시지 (마이크 권한 거부 등)
- [ ] WebSocket 연결 끊김 시 재연결 로직
- [ ] 로딩 상태 표시 개선 (AI 문장 생성, 심판 등 시간 걸리는 작업)

### 1-4. UX 흐름 매끄럽게

- [ ] 페이지 전환 시 애니메이션 or 트랜지션 (현재 하드 라우팅)
- [ ] 녹음 → 배틀 전환 시 "대기 중" 상태 UI (온라인에서 상대방 녹음 기다리기)
- [ ] 게임 도중 나가기 / 재시작 버튼

---

## 2. 루루핑 오마주 요소 — 미구현 항목

### 2-1. 게이지 시스템 (핵심 차별점)

루루핑의 가장 재미있는 요소인데 현재 voice-battle에 없음.

- [ ] **실시간 게이지 바**: 녹음 중 음성 크기/발음에 따라 게이지가 실시간으로 차오르는 연출
  - 현재는 녹음 후 AI가 일괄 평가 → 결과만 보여줌
  - 개선: 녹음 중 Web Audio API의 볼륨으로 임시 게이지 표시 (시각적 피드백)
- [ ] **50% 미달 시 마법 실패** — 현재는 무조건 점수가 나옴. 실패 개념 없음

### 2-2. 에코 효과 / 음성 재생 연출

루루핑은 주문 시전 시 에코를 자동 추가하고, 자기 목소리를 재생해줌.

- [ ] 녹음 완료 후 **에코 효과** 추가하여 재생 (Web Audio API ConvolverNode)
- [ ] 배틀 화면에서 양쪽 녹음을 **극적으로 재생** (현재는 동시 재생 후 바로 심판)

### 2-3. 방어 시스템

루루핑에는 5초 안에 방어 주문을 외치는 긴박한 시스템이 있음. 현재 voice-battle은 공격만.

- [ ] (선택) 라운드 중 방어 턴 추가 — 구현 복잡도 높음, 해커톤에서는 스킵해도 됨

### 2-4. 변신 주문 연출

루루핑의 변신 주문은 무지개색 텍스트 + 회전 글자로 화려한 연출.

- [ ] 게임 시작 시 **캐릭터 등장 연출** (캐치프레이즈 표시 + 오라 효과)
- [ ] 녹음 전 **문장 표시를 극적으로** (타이핑 효과, 글자 크기 변화 등)

---

## 2.5. UI/UX — 이미지 없이 프로덕트 레벨로 보이게 하기

> 현재 상태: 다크 테마 + CSS 변수 + 기본 애니메이션. 괜찮지만 **해커톤 데모에서 "와 이거 진짜 프로덕트다"** 느낌을 주려면 아래 항목들을 적용.

### 2.5-1. 타이포그래피 (가장 효과 대비 노력 적음)

현재 시스템 폰트(`Segoe UI, -apple-system`) 사용 중. 한국어 게임인데 한국어 전용 폰트가 없음.

- [ ] **한국어 웹폰트 적용**: Pretendard 또는 SUIT (무료, 가변 폰트)
  - `@font-face` 또는 Google Fonts CDN
  - 게임 느낌을 더하려면 제목용 폰트 따로: Black Han Sans, Jua 등
- [ ] **제목/본문 폰트 분리**: 제목(게임명, KO, VS)은 굵고 임팩트 있게, 본문은 깔끔하게
- [ ] **폰트 크기 스케일 정리**: 현재 2.5rem ~ 0.65rem까지 산발적 → 일관된 스케일 사용

### 2.5-2. 글래스모피즘 (Glassmorphism) — 깊이감 추가

현재 카드(`--bg-card: #1a1a2e`)가 단색 flat. 반투명 + blur로 한 단계 업.

- [ ] 카드/모달에 `backdrop-filter: blur(12px)` + 반투명 배경
  ```css
  .card-glass {
    background: rgba(26, 26, 46, 0.6);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.08);
  }
  ```
- [ ] HP 바, 배틀 HUD, 문장 박스 등에 적용
- [ ] 주의: `backdrop-filter` 성능 — 모바일에서 과다 사용 시 버벅임

### 2.5-3. 그라디언트 보더 + 글로우 효과

현재 `border: 2px solid rgba(255,255,255,0.08)` → 밋밋함. 게임 UI에는 글로우가 어울림.

- [ ] 선택된 요소에 **그라디언트 보더**:
  ```css
  .card-glow {
    border: 2px solid transparent;
    background-clip: padding-box;
    background-image: linear-gradient(var(--bg-card), var(--bg-card)),
                      linear-gradient(135deg, var(--primary), var(--accent));
    background-origin: border-box;
  }
  ```
- [ ] 중요 요소(녹음 버튼, 승자 카드)에 `box-shadow` 글로우 강화
- [ ] 캐릭터 오라 컬러를 활용한 네온 글로우 (이미 `auraColor` 데이터 있음)

### 2.5-4. 마이크로 인터랙션 / 트랜지션 강화

현재 `fadeIn 0.4s`만 있음. 페이지 전환이 뚝뚝 끊김.

- [ ] **페이지 진입 애니메이션**: 요소별 stagger (순차 등장)
  ```css
  .stagger > *:nth-child(1) { animation-delay: 0s; }
  .stagger > *:nth-child(2) { animation-delay: 0.1s; }
  .stagger > *:nth-child(3) { animation-delay: 0.2s; }
  ```
- [ ] **버튼 hover**: 현재 `translateY(-2px)`만 → ripple 효과 또는 shine 효과 추가
- [ ] **카운트다운 애니메이션**: 녹음 시작 전 3, 2, 1 카운트다운
- [ ] **점수 카운트업**: 0에서 목표 점수까지 숫자가 올라가는 애니메이션 (현재 result에 있지만 battle에서도)

### 2.5-5. 배경 연출 (CSS only, 이미지 없이)

현재 배경이 `#0a0a1a` 단색. 게임 분위기에 비해 너무 밋밋.

- [ ] **CSS 그라디언트 배경**: 페이지별로 다른 분위기
  ```css
  body { background: radial-gradient(ellipse at top, #1a1a3e, #0a0a1a 70%); }
  ```
- [ ] **CSS 파티클 / 떠다니는 원**: `@keyframes float`으로 배경에 느리게 움직이는 bokeh 효과
  ```css
  .bg-particle {
    position: fixed;
    width: 200px;
    height: 200px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(108,92,231,0.15), transparent);
    animation: float 8s ease-in-out infinite;
    pointer-events: none;
  }
  ```
- [ ] **배틀 화면 배경**: 긴장감 있는 어두운 그라디언트 + 미세 pulse 효과
- [ ] **KO 화면 배경**: 방사형 빨간 그라디언트 폭발 효과

### 2.5-6. 사운드 효과 (비주얼은 아니지만 체감 퀄리티 극대화)

이미지 없이 프로덕트 느낌을 주는 가장 효과적인 방법 중 하나.

- [ ] **UI 사운드**: 버튼 클릭, 캐릭터 선택, 페이지 전환
- [ ] **게임 사운드**: 녹음 시작/종료 비프, 카운트다운, 배틀 차징, 투사체, 피격
- [ ] **BGM**: 로비(가벼운), 녹음(긴장), 배틀(격렬), KO(드라마틱)
- [ ] Web Audio API로 짧은 톤 생성 가능 (외부 파일 없이)
- [ ] 또는 Gemini TTS로 효과음 텍스트 읽어서 사용 (창의적!)

### 2.5-7. 반응형 강화

현재 `@media (max-width: 400px)` 하나뿐. 태블릿/PC 화면 대응 없음.

- [ ] `max-width: 500px` 컨테이너가 PC에서 너무 좁아 보임
- [ ] 태블릿(768px+): 캐릭터 그리드 넓히기, 배틀 화면 여유 공간 활용
- [ ] PC(1024px+): 사이드바에 관전 정보, 채팅 등 배치 가능
- [ ] **Safe area**: 노치/다이나믹 아일랜드 대응 (`env(safe-area-inset-*)`)

### 2.5-8. 로딩 / 상태 표시 개선

현재 단순 스피너. 게임답지 않음.

- [ ] **스켈레톤 UI**: 카드형 로딩 시 뼈대 표시
- [ ] **프로그레스 바**: AI 심판 중 "분석 중..." + 진행률 바 (가짜라도)
- [ ] **로딩 텍스트 다양화**: "AI 심판이 녹음을 듣고 있습니다...", "감정을 분석하고 있습니다..." 등 랜덤
- [ ] **토스트 알림**: 에러/성공 메시지를 모달 대신 토스트로 (하단 팝업)

### 2.5-9. 즉시 적용 가능한 CSS 트릭 (5분 이내)

- [ ] `scroll-behavior: smooth` — 스크롤 부드럽게
- [ ] `user-select: none` — 게임 UI에서 텍스트 선택 방지
- [ ] `-webkit-tap-highlight-color: transparent` — 모바일 탭 하이라이트 제거
- [ ] `cursor: pointer` 모든 인터랙티브 요소에 확인
- [ ] `transition: all 0.2s ease` → 구체적 속성으로 변경 (`transition: transform 0.2s, box-shadow 0.2s`)
- [ ] `font-variant-numeric: tabular-nums` — 점수/타이머 숫자 정렬 (일부 적용됨, 전체 확인)
- [ ] `will-change: transform` — 애니메이션 요소에 GPU 가속 힌트

### 요약: 이미지 없이 프로덕트 레벨 체크리스트

| 우선순위 | 항목 | 소요 시간 | 효과 |
|---|---|---|---|
| 1 | 한국어 웹폰트 (Pretendard + 제목용) | 10분 | ★★★★★ |
| 2 | CSS 즉시 트릭 (smooth scroll, user-select 등) | 5분 | ★★★ |
| 3 | 배경 그라디언트 + 파티클 | 20분 | ★★★★ |
| 4 | 글래스모피즘 카드 | 15분 | ★★★★ |
| 5 | 요소 stagger 애니메이션 | 15분 | ★★★★ |
| 6 | 사운드 효과 | 30분 | ★★★★★ |
| 7 | 그라디언트 보더 + 네온 글로우 | 20분 | ★★★ |
| 8 | 로딩 텍스트 다양화 + 프로그레스 | 15분 | ★★★ |
| 9 | 반응형 강화 (태블릿/PC) | 30분 | ★★ |

---

## 3. 임팩트 (심사 25%)

### 3-1. 한국어 학습 기능 어필 부족

현재 순수 한국어 게임이지만, 외국인 대상 한국어 학습 도구로의 확장성이 언급만 되고 구현은 없음.

- [ ] 명대사의 **영어 번역** 표시 옵션 (UI 토글)
- [ ] AI 피드백에 **발음 교정 힌트** 포함 (Gemini 프롬프트 수정으로 가능)
- [ ] (선택) 난이도 선택: 쉬운 대사 / 어려운 대사

### 3-2. 소셜 / 바이럴 요소

- [ ] **결과 공유 기능**: 배틀 결과를 이미지로 저장 / 공유 (Canvas → PNG)
- [ ] **하이라이트 재생**: KO 후 최고 점수 녹음을 다시 들을 수 있는 기능
- [ ] QR 코드로 방 참가 (코드 수동 입력 대신)

### 3-3. 장기적 확장성 스토리

피치에서 어필할 수 있는 로드맵:
- K-POP 노래 가사 배틀
- AI 캐릭터 보이스 (성우 스타일 선택)
- 관객 투표 모드 (여러 명이 관전하며 투표)
- 토너먼트 모드

---

## 4. 창의성 (심사 15%)

### 4-1. Gemini 활용 깊이 강화

현재 4중 활용 (문장 생성 / 심판 / TTS / 이미지) 이지만 더 할 수 있음.

- [ ] **실시간 AI 해설**: 배틀 중 Gemini가 실시간 해설 텍스트 생성 (예: "P1의 감정 표현이 폭발합니다!")
- [ ] **AI 코치**: 녹음 전 Gemini가 "이 대사는 이런 감정으로 읽어보세요" 힌트 제공
- [ ] **동적 난이도 조절**: Gemini가 플레이어 수준에 맞춰 문장 난이도 조절
- [ ] **Gemini 3** 모델로 업그레이드 (해커톤에서 Gemini 3 사용이 핵심)

### 4-2. 멀티모달 활용 극대화 — 이미지 생성을 게임플레이에 녹이기

Gemini의 강점 = 멀티모달. 현재 텍스트+오디오+이미지 사용 중이지만 **이미지 생성이 캐릭터 사전 생성에만 쓰임**.
루루핑도 AI로 모든 그래픽(캐릭터/배경/UI)을 만들었지만 사전 제작 방식이었음.
voice-battle은 여기서 한 발 더 나아가 **런타임 동적 이미지 생성**으로 차별화 가능.

> 현재: 텍스트 + 오디오 + TTS + 이미지(캐릭터) = 4중 활용
> 목표: 텍스트 + 오디오 + TTS + 이미지(캐릭터) + **이미지(배틀씬) + 이미지(배경) + 이미지(결과카드)** = 7중 활용

#### 4-2-1. 배틀 결과 일러스트 동적 생성 ⭐ 1순위

배틀 종료 후 Gemini로 **"승자가 패자를 이기는 장면" 일러스트를 실시간 생성**.

- [ ] `/result` 화면에서 Gemini 이미지 생성 API 호출
- [ ] 프롬프트 예시: "치비 스타일, 불꽃 대사왕🔥이 눈물 여왕💧을 화염 공격으로 이기는 장면, 다이나믹 포즈, 이펙트"
- [ ] 이미 `generate-character-image` API가 있으므로 **프롬프트만 변경**하면 구현 가능
- [ ] Gemini 2.5 Flash Image의 **캐릭터 일관성(character consistency)** 기능 활용
- [ ] 생성된 이미지를 결과 화면 상단에 표시 + SNS 공유 가능

#### 4-2-2. 명대사 씬 배경 동적 생성 ⭐ 2순위

키워드 선택 후 **명대사의 원작 분위기에 맞는 배경 이미지**를 Gemini로 생성.

- [ ] 녹음 화면(`/recording`)과 배틀 화면(`/battle`)의 배경으로 사용
- [ ] 프롬프트에 명대사 출처(source) 활용
  - 오징어 게임 → 어두운 게임장 배경
  - 도깨비 → 메밀꽃 밭 배경
  - 기생충 → 반지하 vs 대저택 배경
- [ ] 새 API: `POST /api/generate-scene-background` → `{ quoteSource, sentence }` → 배경 이미지

#### 4-2-3. KO 승리 일러스트 생성

HP가 0이 되면 **승자의 축하 포즈 일러스트** 동적 생성.

- [ ] `/ko` 화면에서 승자 캐릭터의 승리 일러스트 생성
- [ ] 프롬프트: 승자 캐릭터 정보 + "승리 포즈, 화려한 이펙트, 축하 분위기"

#### 4-2-4. 결과 공유 카드 이미지 생성

배틀 결과를 **SNS 공유용 카드 이미지**로 Gemini가 생성.

- [ ] 점수, 캐릭터, 명대사를 포함한 공유 카드
- [ ] Canvas로 합성하는 대신 Gemini에게 직접 디자인시키면 더 창의적

#### 4-2-5. 기타 멀티모달 확장

- [ ] **영상 생성**: 배틀 결과를 짧은 영상으로 생성 (Gemini video gen 지원 시)
- [ ] **표정 인식**: 웹캠으로 표정 캡처 → Gemini에 전달 → 감정 분석 추가 점수
- [ ] **Google Genie 3**: 텍스트 → 인터랙티브 3D 환경 생성 (실험적, 해커톤에서는 스킵 권장)

---

## 5. 피치 (심사 10%)

### 5-1. 발표 자료 준비

- [ ] **3분 시연 영상** 제작 (제출 요구사항)
- [ ] **슬라이드 5장 이내**: 문제 → 솔루션 → 데모 → Gemini 활용 → 임팩트
- [ ] **한 줄 피치**: "한국 드라마 명대사를 AI가 심판하는 성우 배틀 게임"

### 5-2. 라이브 데모 시나리오

- [ ] 30초 안에 게임 설명 → 심사위원 직접 플레이 유도
- [ ] 미리 준비된 방 코드로 빠르게 시작
- [ ] fallback 영상 준비 (라이브 실패 대비)

---

## 6. 기술적 부채 / 버그 리스크

### 6-1. P1 중앙 집중 문제

온라인에서 P1이 문장 생성 / 심판 / 라운드 완료를 전담. P1이 이탈하면 게임 진행 불가.

- [ ] P2도 심판 요청 가능하도록 fallback 로직
- [ ] 또는 서버 사이드에서 심판 처리 (P1 의존 제거)

### 6-2. 인메모리 저장소

서버 재시작 = 모든 방 소실. 해커톤 중 서버 크래시 시 진행 중인 게임 모두 날아감.

- [ ] (선택) Redis 같은 간이 저장소 추가
- [ ] 또는 최소한 서버 안정성 확보 (PM2, health check)

### 6-3. 오디오 호환성

- [ ] `audio/webm;codecs=opus` 미지원 브라우저 대응 (iOS Safari는 미지원)
- [ ] WAV fallback 또는 다른 포맷 지원
- [ ] 녹음 시간 제한 확인 (너무 짧거나 긴 녹음 방지)

---

## 우선순위 정리

### 반드시 해야 함 (해커톤 필수)

| 순서 | 항목 | 이유 |
|---|---|---|
| 1 | 프로덕션 배포 (프론트+백엔드) | 프로덕션 스프린트 요구사항 |
| 2 | HTTPS + 모바일 마이크 동작 확인 | 라이브 데모 필수 |
| 3 | 에러 핸들링 (API 실패, 마이크 거부) | 데모 중 깨지면 끝 |
| 4 | Gemini 3 모델 업그레이드 | 해커톤이 Gemini 3 활용 대회 |

### 하면 좋음 (차별화)

| 순서 | 항목 | 이유 |
|---|---|---|
| 5 | 배틀 결과 일러스트 동적 생성 ⭐ | Gemini 멀티모달 극대화 + 시각적 임팩트 |
| 6 | 명대사 씬 배경 동적 생성 ⭐ | 몰입감 + Gemini 활용 7중으로 확대 |
| 7 | 실시간 게이지 연출 (루루핑 오마주) | 시각적 재미 + 창의성 점수 |
| 8 | 에코 효과 / 극적 음성 재생 | 연출 퀄리티 |
| 9 | AI 코치 / 실시간 해설 | Gemini 활용 깊이 |
| 10 | QR 코드 방 참가 | 데모 편의성 |

### 시간 남으면 (보너스)

| 순서 | 항목 | 이유 |
|---|---|---|
| 11 | KO 승리 일러스트 생성 | 루루핑 오마주 + 멀티모달 |
| 12 | 결과 공유 카드 이미지 생성 | 바이럴 + 임팩트 |
| 13 | 영어 번역 토글 | 글로벌 임팩트 |
| 14 | 캐릭터 등장 연출 강화 | 루루핑 오마주 |
| 15 | 관객 투표/관전 모드 | 장기 확장성 어필 |
| 16 | 표정 인식 (웹캠) | 멀티모달 극대화 |
